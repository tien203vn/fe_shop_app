<app-header></app-header>
    <!-- ======= Breadcrumbs ======= -->
    <div id="breadcrumbs" class="breadcrumbs">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center">
          <h2>Bài viết</h2>
          <ol>
            <li><a routerLink="/">Trang chủ</a></li>
            <li><a [routerLink]="['/articles']">Bài viết</a></li>
            <li *ngIf="isDetailView">Chi tiết bài viết</li>
          </ol>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="blog">
        <div class="row">
          <!-- Article Detail View -->
          <div class="col-lg-8 entries" *ngIf="isDetailView && article">
            <article class="entry entry-single">
              <h2 class="entry-title">
                <a>{{article.title}}</a>
              </h2>

              <div class="entry-meta">
                <ul>
                  <li class="d-flex align-items-center"><i class="bi bi-person"></i> <span>{{article.author || 'Admin'}}</span></li>
                  <li class="d-flex align-items-center"><i class="bi bi-clock"></i> <span><time>{{article.created_at | date:'dd/MM/yyyy'}}</time></span></li>
                </ul>
              </div>

              <div class="entry-content">
                <p style="text-align: justify;" [innerHTML]="article.description">
                </p>
                <div style="margin-top: 30px;" class="entry-img" *ngIf="article.url">
                  <img [src]="article.url" [alt]="article.title" class="img-fluid">
                </div>

                <blockquote>
                  <p>
                    Đồ điện tử để lại ấn tượng rất khác biệt, vì vậy khi bạn tặng ai đó một món quà là đồ điện tử, tôi liền nghĩ rằng món quà đó bạn dành cho một người mà bạn yêu thương.
                  </p>
                </blockquote>

                <p style="text-align: justify;" [innerHTML]="article.content">
                </p>
              </div>       
            </article>

            <div class="blog-author d-flex align-items-center">
              <div>
                <h4>{{article.author || 'Admin'}}</h4>
                <div class="social-links">
                  <a href="#"><i class="bi bi-twitter"></i></a>
                  <a href="#"><i class="bi bi-facebook"></i></a>
                  <a href="#"><i class="bi bi-instagram"></i></a>
                </div>
                <p>
                  Khám phá công nghệ đỉnh cao, nâng tầm cuộc sống – Đồ điện tử Minh Tiến, chất lượng trong từng sản phẩm!
                </p>
              </div>
            </div>
          </div>
          <!-- End Article Detail View -->

          <!-- Article List View -->
          <div class="col-lg-8 entries" *ngIf="!isDetailView">
            <div class="row" *ngIf="articles && articles.length > 0">
              <div class="col-md-6 mb-4" *ngFor="let article of articles">
                <div class="card h-100">
                  <div class="card-img-top-container" style="height: 200px; overflow: hidden;">
                    <img [src]="article.url" [alt]="article.title" class="card-img-top h-100" style="object-fit: cover;" (click)="navigateToArticleDetail(article.id)">
                  </div>
                  <div class="card-body">
                    <h5 class="card-title">
                      <a (click)="navigateToArticleDetail(article.id)" style="cursor: pointer;">{{article.title}}</a>
                    </h5>
                    <p class="card-text text-muted small">
                      <i class="bi bi-calendar3 me-1"></i> {{article.created_at | date:'dd/MM/yyyy'}}
                      <span class="mx-2">|</span>
                      <i class="bi bi-person me-1"></i> {{article.author || 'Admin'}}
                    </p>
                    <p class="card-text" [innerHTML]="article.description | slice:0:150">
                    </p>
                    <a (click)="navigateToArticleDetail(article.id)" class="btn btn-outline-primary btn-sm">Xem thêm</a>
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="!articles || articles.length === 0" class="text-center py-5">
              <p>Chưa có bài viết nào.</p>
            </div>
          </div>
          <!-- End Article List View -->

          <div class="col-lg-4">
            <div class="sidebar">
              <!-- Categories -->
              <div class="sidebar-item">
                <h3 class="sidebar-title">Danh mục</h3>
                <ul class="list-group list-group-flush tab-right">
                  <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let category of categories">
                    <a [routerLink]="['/product-list']" [queryParams]="{categoryId: category.id}" class="text-decoration-none">
                      {{category.name}}
                    </a>
                  </li>
                </ul>
              </div>

              <!-- Recent Posts -->
              <div class="sidebar-item mt-4">
                <h3 class="sidebar-title">Bài viết mới nhất</h3>
                <div class="mt-3">
                  <div class="d-flex mb-3" *ngFor="let article of articles">
                    <img [src]="article.url" [alt]="article.title" class="flex-shrink-0 me-3" style="width: 80px; height: 60px; object-fit: cover;">
                    <div>
                      <h6 class="mb-0">
                        <a (click)="navigateToArticleDetail(article.id)" class="text-decoration-none" style="cursor: pointer;">
                          {{article.title | slice:0:40}}{{article.title.length > 40 ? '...' : ''}}
                        </a>
                      </h6>
                      <small class="text-muted">
                        <i class="bi bi-calendar3 me-1"></i> {{article.created_at | date:'dd/MM/yyyy'}}
                      </small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
      
    </div>

    <app-contact></app-contact>
<app-footer></app-footer>